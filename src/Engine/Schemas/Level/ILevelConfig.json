{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "tags": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "$ref": "#/definitions/LevelTag"
          },
          {
            "$ref": "#/definitions/CommonTag"
          },
          {
            "type": "string"
          }
        ]
      }
    },
    "name": {
      "type": "string"
    },
    "version": {
      "$ref": "#/definitions/SchemaVersion"
    },
    "scenes": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ISceneConfig"
      }
    },
    "actors": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/IActorConfig"
      }
    },
    "cameras": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ICameraConfig"
      }
    },
    "lights": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ILightConfig"
      }
    },
    "texts": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ITextConfig"
      }
    },
    "controls": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/IControlsConfig"
      }
    }
  },
  "required": ["actors", "cameras", "controls", "lights", "name", "scenes", "tags", "texts", "version"],
  "definitions": {
    "LevelTag": {
      "type": "string",
      "const": "build-in"
    },
    "CommonTag": {
      "type": "string",
      "const": "from_config"
    },
    "SchemaVersion": {
      "type": "string",
      "const": "1.0.0"
    },
    "ISceneConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "background": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "tags": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/SceneTag"
              },
              {
                "$ref": "#/definitions/CommonTag"
              },
              {
                "type": "string"
              }
            ]
          }
        }
      },
      "required": ["name", "tags"]
    },
    "SceneTag": {
      "type": "string",
      "const": "current"
    },
    "IActorConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "$ref": "#/definitions/ActorType"
        },
        "width": {
          "type": "number"
        },
        "height": {
          "type": "number"
        },
        "materialParams": {
          "$ref": "#/definitions/IActorMaterialConfig"
        },
        "position": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "rotation": {
          "$ref": "#/definitions/IEuler3dConfig"
        },
        "castShadow": {
          "type": "boolean"
        },
        "depth": {
          "type": "number"
        },
        "radius": {
          "type": "number"
        },
        "widthSegments": {
          "type": "number"
        },
        "heightSegments": {
          "type": "number"
        },
        "depthSegments": {
          "type": "number"
        },
        "tags": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/ActorTag"
              },
              {
                "$ref": "#/definitions/CommonTag"
              },
              {
                "type": "string"
              }
            ]
          }
        }
      },
      "required": ["castShadow", "height", "materialParams", "position", "tags", "type", "width"]
    },
    "ActorType": {
      "type": "string",
      "enum": ["sphere", "plane", "cube"]
    },
    "IActorMaterialConfig": {
      "type": "object",
      "properties": {
        "color": {
          "type": "string"
        }
      },
      "required": ["color"],
      "additionalProperties": false
    },
    "IWithCoordsXYZ": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "z": {
          "type": "number"
        },
        "y": {
          "type": "number"
        },
        "x": {
          "type": "number"
        }
      },
      "required": ["x", "y", "z"]
    },
    "IEuler3dConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "order": {
          "$ref": "#/definitions/EulerOrder"
        },
        "x": {
          "type": "number"
        },
        "y": {
          "type": "number"
        },
        "z": {
          "type": "number"
        }
      }
    },
    "EulerOrder": {
      "type": "string",
      "enum": ["XYZ", "YXZ", "ZXY", "ZYX", "YZX", "XZY"]
    },
    "ActorTag": {
      "type": "string",
      "const": "intersectable"
    },
    "ICameraConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "rotation": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "position": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "lookAt": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "fov": {
          "type": "number"
        },
        "near": {
          "type": "number"
        },
        "far": {
          "type": "number"
        },
        "tags": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/CameraTag"
              },
              {
                "$ref": "#/definitions/CommonTag"
              },
              {
                "type": "string"
              }
            ]
          }
        }
      },
      "required": ["position", "rotation", "tags"]
    },
    "CameraTag": {
      "type": "string",
      "enum": ["initial", "active"]
    },
    "ILightConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "$ref": "#/definitions/ILightType"
        },
        "color": {
          "type": "string"
        },
        "intensity": {
          "type": "number"
        },
        "castShadow": {
          "type": "boolean"
        },
        "shadow": {
          "$ref": "#/definitions/LightShadowConfig"
        },
        "position": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "tags": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/LightTag"
              },
              {
                "$ref": "#/definitions/CommonTag"
              },
              {
                "type": "string"
              }
            ]
          }
        }
      },
      "required": ["castShadow", "color", "intensity", "position", "tags", "type"]
    },
    "ILightType": {
      "type": "string",
      "enum": ["ambient", "directional"]
    },
    "LightShadowConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "mapSize": {
          "$ref": "#/definitions/IWithCoordsXY"
        },
        "camera": {
          "type": "object",
          "properties": {
            "far": {
              "type": "number"
            }
          },
          "required": ["far"],
          "additionalProperties": false
        },
        "normalBias": {
          "type": "number"
        }
      },
      "required": ["camera", "mapSize", "normalBias"]
    },
    "IWithCoordsXY": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "y": {
          "type": "number"
        },
        "x": {
          "type": "number"
        }
      },
      "required": ["x", "y"]
    },
    "LightTag": {
      "type": "string",
      "const": "ambient"
    },
    "ITextConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "position": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "rotation": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "color": {
          "type": "string"
        },
        "strokeColor": {
          "type": ["string", "number"]
        },
        "materialType": {
          "type": "string",
          "enum": ["MeshBasicMaterial", "MeshStandardMaterial"]
        },
        "materialParams": {
          "type": "object"
        },
        "text": {
          "type": "string"
        },
        "fontSize": {
          "type": "number"
        },
        "font": {
          "type": "string"
        },
        "maxWidth": {
          "type": "number"
        },
        "lineHeight": {
          "type": "number"
        },
        "letterSpacing": {
          "type": "number"
        },
        "textAlign": {
          "$ref": "#/definitions/TextAlign"
        },
        "anchorX": {
          "anyOf": [
            {
              "$ref": "#/definitions/TextAnchorX"
            },
            {
              "type": "number"
            }
          ]
        },
        "anchorY": {
          "anyOf": [
            {
              "$ref": "#/definitions/TextAnchorY"
            },
            {
              "type": "number"
            }
          ]
        },
        "clipRect": {
          "type": "array",
          "items": {
            "type": "number"
          },
          "minItems": 4,
          "maxItems": 4
        },
        "depthOffset": {
          "type": "number"
        },
        "direction": {
          "$ref": "#/definitions/TextDirection"
        },
        "overflowWrap": {
          "$ref": "#/definitions/TextOverflowWrap"
        },
        "whiteSpace": {
          "$ref": "#/definitions/TextWhiteSpace"
        },
        "outlineWidth": {
          "type": "number"
        },
        "outlineOffsetX": {
          "type": "number"
        },
        "outlineOffsetY": {
          "type": "number"
        },
        "outlineColor": {
          "type": ["string", "number"]
        },
        "outlineOpacity": {
          "type": "number"
        },
        "strokeWidth": {
          "type": "number"
        },
        "strokeOpacity": {
          "type": "number"
        },
        "curveRadius": {
          "type": "number"
        },
        "fillOpacity": {
          "type": "number"
        },
        "fontStyle": {
          "$ref": "#/definitions/TextFontStyle"
        },
        "fontWeight": {
          "$ref": "#/definitions/TextFontWeight"
        },
        "glyphGeometryDetail": {
          "type": "number"
        },
        "gpuAccelerateSDF": {
          "type": "boolean"
        },
        "outlineBlur": {
          "type": "number"
        },
        "sdfGlyphSize": {
          "type": "number"
        },
        "textIndent": {
          "type": "number"
        },
        "unicodeFontsUrl": {
          "type": "string"
        },
        "tags": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/TextTag"
              },
              {
                "$ref": "#/definitions/CommonTag"
              },
              {
                "type": "string"
              }
            ]
          }
        }
      },
      "required": ["fontSize", "position", "tags", "text"]
    },
    "TextAlign": {
      "type": "string",
      "enum": ["left", "right", "center", "justify"]
    },
    "TextAnchorX": {
      "type": "string",
      "enum": ["left", "right", "center"]
    },
    "TextAnchorY": {
      "type": "string",
      "enum": ["top", "bottom", "middle", "baseline"]
    },
    "TextDirection": {
      "type": "string",
      "enum": ["auto", "ltr", "rtl"]
    },
    "TextOverflowWrap": {
      "type": "string",
      "enum": ["normal", "break-word"]
    },
    "TextWhiteSpace": {
      "type": "string",
      "enum": ["normal", "nowrap"]
    },
    "TextFontStyle": {
      "type": "string",
      "enum": ["normal", "italic"]
    },
    "TextFontWeight": {
      "type": "string",
      "enum": ["normal", "bold"]
    },
    "TextTag": {
      "type": "string",
      "enum": ["ui", "action"]
    },
    "IControlsConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "tags": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/ControlsTag"
              },
              {
                "$ref": "#/definitions/CommonTag"
              },
              {
                "type": "string"
              }
            ]
          }
        },
        "type": {
          "$ref": "#/definitions/IControlsType"
        },
        "cameraTag": {
          "$ref": "#/definitions/CameraTag"
        },
        "enableDamping": {
          "type": "boolean"
        }
      },
      "required": ["cameraTag", "tags", "type"]
    },
    "ControlsTag": {
      "type": "string",
      "const": "initial"
    },
    "IControlsType": {
      "type": "string",
      "const": "OrbitControls"
    }
  }
}
