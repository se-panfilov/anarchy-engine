{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "tags": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "$ref": "#/definitions/LevelTag"
          },
          {
            "$ref": "#/definitions/CommonTag"
          },
          {
            "type": "string"
          }
        ]
      }
    },
    "name": {
      "type": "string"
    },
    "version": {
      "$ref": "#/definitions/SchemaVersion"
    },
    "scenes": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ISceneConfig"
      }
    },
    "actors": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/IActorConfig"
      }
    },
    "cameras": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ICameraConfig"
      }
    },
    "lights": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ILightConfig"
      }
    },
    "texts": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ITextConfig"
      }
    },
    "controls": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/IControlsConfig"
      }
    }
  },
  "required": ["actors", "cameras", "controls", "lights", "name", "scenes", "tags", "texts", "version"],
  "definitions": {
    "LevelTag": {
      "type": "string",
      "const": "build-in"
    },
    "CommonTag": {
      "type": "string",
      "const": "from_config"
    },
    "SchemaVersion": {
      "type": "string",
      "const": "1.0.0"
    },
    "ISceneConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "tags": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/SceneTag"
              },
              {
                "$ref": "#/definitions/CommonTag"
              },
              {
                "type": "string"
              }
            ]
          }
        },
        "visible": {
          "type": "boolean"
        },
        "castShadow": {
          "type": "boolean"
        },
        "receiveShadow": {
          "type": "boolean"
        },
        "frustumCulled": {
          "type": "boolean"
        },
        "renderOrder": {
          "type": "number"
        },
        "layers": {
          "type": "number"
        },
        "animations": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "rotation": {
          "$ref": "#/definitions/IEuler3dConfig"
        },
        "scale": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "position": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "background": {
          "type": "string"
        },
        "name": {
          "type": "string"
        }
      },
      "required": ["name", "tags"]
    },
    "SceneTag": {
      "type": "string",
      "const": "current"
    },
    "IEuler3dConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "order": {
          "$ref": "#/definitions/EulerOrder"
        },
        "x": {
          "type": "number"
        },
        "y": {
          "type": "number"
        },
        "z": {
          "type": "number"
        }
      }
    },
    "EulerOrder": {
      "type": "string",
      "enum": ["XYZ", "YXZ", "ZXY", "ZYX", "YZX", "XZY"]
    },
    "IWithCoordsXYZ": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "z": {
          "type": "number"
        },
        "y": {
          "type": "number"
        },
        "x": {
          "type": "number"
        }
      },
      "required": ["x", "y", "z"]
    },
    "IActorConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "tags": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/ActorTag"
              },
              {
                "$ref": "#/definitions/CommonTag"
              },
              {
                "type": "string"
              }
            ]
          }
        },
        "layers": {
          "type": "number"
        },
        "animations": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "position": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "rotation": {
          "$ref": "#/definitions/IEuler3dConfig"
        },
        "scale": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "visible": {
          "type": "boolean"
        },
        "castShadow": {
          "type": "boolean"
        },
        "receiveShadow": {
          "type": "boolean"
        },
        "frustumCulled": {
          "type": "boolean"
        },
        "renderOrder": {
          "type": "number"
        },
        "type": {
          "$ref": "#/definitions/ActorType"
        },
        "width": {
          "type": "number"
        },
        "height": {
          "type": "number"
        },
        "materialParams": {
          "$ref": "#/definitions/IActorMaterialConfig"
        },
        "depth": {
          "type": "number"
        },
        "radius": {
          "type": "number"
        },
        "widthSegments": {
          "type": "number"
        },
        "heightSegments": {
          "type": "number"
        },
        "depthSegments": {
          "type": "number"
        },
        "texturePack": {
          "$ref": "#/definitions/ITexturePack"
        }
      },
      "required": ["castShadow", "height", "materialParams", "position", "tags", "type", "width"]
    },
    "ActorTag": {
      "type": "string",
      "const": "intersectable"
    },
    "ActorType": {
      "type": "string",
      "enum": ["sphere", "plane", "cube"]
    },
    "IActorMaterialConfig": {
      "type": "object",
      "properties": {
        "color": {
          "type": "string"
        }
      },
      "required": ["color"],
      "additionalProperties": false
    },
    "ITexturePack": {
      "type": "object",
      "properties": {
        "map": {
          "$ref": "#/definitions/ITexturePackParams"
        },
        "aoMap": {
          "$ref": "#/definitions/ITexturePackParams"
        },
        "specularMap": {
          "$ref": "#/definitions/ITexturePackParams"
        },
        "alphaMap": {
          "$ref": "#/definitions/ITexturePackParams"
        },
        "envMap": {
          "$ref": "#/definitions/ITexturePackParams"
        },
        "lightMap": {
          "$ref": "#/definitions/ITexturePackParams"
        }
      },
      "additionalProperties": false
    },
    "ITexturePackParams": {
      "type": "object",
      "properties": {
        "url": {
          "type": "string"
        },
        "params": {
          "$ref": "#/definitions/ITextureParams"
        }
      },
      "required": ["url"],
      "additionalProperties": false
    },
    "ITextureParams": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "tags": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "$ref": "#/definitions/CommonTag"
              }
            ]
          }
        },
        "mapping": {
          "$ref": "#/definitions/Mapping"
        },
        "wrapS": {
          "$ref": "#/definitions/Wrapping"
        },
        "wrapT": {
          "$ref": "#/definitions/Wrapping"
        },
        "magFilter": {
          "$ref": "#/definitions/MagnificationTextureFilter"
        },
        "minFilter": {
          "$ref": "#/definitions/MinificationTextureFilter"
        },
        "format": {
          "$ref": "#/definitions/PixelFormat"
        },
        "type": {
          "$ref": "#/definitions/TextureDataType"
        },
        "anisotropy": {
          "type": "number"
        },
        "colorSpace": {
          "$ref": "#/definitions/ColorSpace"
        }
      },
      "required": ["tags"]
    },
    "Mapping": {
      "type": "number",
      "enum": [300, 303, 304],
      "description": "Texture Mapping Modes for non-cube Textures"
    },
    "Wrapping": {
      "type": "number",
      "enum": [1000, 1001, 1002],
      "description": "Texture Wrapping Modes"
    },
    "MagnificationTextureFilter": {
      "type": "number",
      "enum": [1003, 1006],
      "description": "Texture Magnification Filter Modes. For use with a texture's  {@link  THREE.Texture.magFilter magFilter }  property, these define the texture magnification function to be used when the pixel being textured maps to an area less than or equal to one texture element (texel)."
    },
    "MinificationTextureFilter": {
      "type": "number",
      "enum": [1003, 1004, 1005, 1006, 1007, 1008],
      "description": "Texture Minification Filter Modes. For use with a texture's  {@link  THREE.Texture.minFilter minFilter }  property, these define the texture minifying function that is used whenever the pixel being textured maps to an area greater than one texture element (texel)."
    },
    "PixelFormat": {
      "anyOf": [
        {
          "$ref": "#/definitions/WebGL1PixelFormat"
        },
        {
          "$ref": "#/definitions/WebGL2PixelFormat"
        }
      ],
      "description": "All Texture Pixel Formats Modes."
    },
    "WebGL1PixelFormat": {
      "type": "number",
      "enum": [1021, 1024, 1025, 1026, 1027, 1028, 1029, 1030, 1035],
      "description": "Texture Pixel Formats Modes. Compatible only with  {@link  WebGLRenderingContext WebGL 1 Rendering Context } ."
    },
    "WebGL2PixelFormat": {
      "type": "number",
      "enum": [1021, 1023, 1024, 1025, 1026, 1027, 1028, 1029, 1030, 1031, 1033, 1035],
      "description": "Texture Pixel Formats Modes. Compatible only with  {@link  WebGL2RenderingContext WebGL 2 Rendering Context } ."
    },
    "TextureDataType": {
      "type": "number",
      "enum": [1009, 1010, 1011, 1012, 1013, 1014, 1015, 1016, 1017, 1018, 1020],
      "description": "Texture Types."
    },
    "ColorSpace": {
      "type": "string",
      "enum": ["", "srgb", "srgb-linear", "display-p3", "display-p3-linear"]
    },
    "ICameraConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "tags": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/CameraTag"
              },
              {
                "$ref": "#/definitions/CommonTag"
              },
              {
                "type": "string"
              }
            ]
          }
        },
        "layers": {
          "type": "number"
        },
        "animations": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "position": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "rotation": {
          "$ref": "#/definitions/IEuler3dConfig"
        },
        "scale": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "visible": {
          "type": "boolean"
        },
        "castShadow": {
          "type": "boolean"
        },
        "receiveShadow": {
          "type": "boolean"
        },
        "frustumCulled": {
          "type": "boolean"
        },
        "renderOrder": {
          "type": "number"
        },
        "lookAt": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "fov": {
          "type": "number"
        },
        "near": {
          "type": "number"
        },
        "far": {
          "type": "number"
        }
      },
      "required": ["position", "tags"]
    },
    "CameraTag": {
      "type": "string",
      "enum": ["initial", "active"]
    },
    "ILightConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "tags": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/LightTag"
              },
              {
                "$ref": "#/definitions/CommonTag"
              },
              {
                "type": "string"
              }
            ]
          }
        },
        "layers": {
          "type": "number"
        },
        "animations": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "position": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "rotation": {
          "$ref": "#/definitions/IEuler3dConfig"
        },
        "scale": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "visible": {
          "type": "boolean"
        },
        "castShadow": {
          "type": "boolean"
        },
        "receiveShadow": {
          "type": "boolean"
        },
        "frustumCulled": {
          "type": "boolean"
        },
        "renderOrder": {
          "type": "number"
        },
        "color": {
          "type": "string"
        },
        "shadow": {
          "$ref": "#/definitions/LightShadowConfig"
        },
        "type": {
          "$ref": "#/definitions/ILightType"
        },
        "intensity": {
          "type": "number"
        }
      },
      "required": ["castShadow", "color", "position", "tags", "type"]
    },
    "LightTag": {
      "type": "string",
      "const": "ambient"
    },
    "LightShadowConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "mapSize": {
          "$ref": "#/definitions/IWithCoordsXY"
        },
        "camera": {
          "type": "object",
          "properties": {
            "far": {
              "type": "number"
            }
          },
          "required": ["far"],
          "additionalProperties": false
        },
        "normalBias": {
          "type": "number"
        }
      },
      "required": ["camera", "mapSize", "normalBias"]
    },
    "IWithCoordsXY": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "y": {
          "type": "number"
        },
        "x": {
          "type": "number"
        }
      },
      "required": ["x", "y"]
    },
    "ILightType": {
      "type": "string",
      "enum": ["ambient", "directional"]
    },
    "ITextConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "tags": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/TextTag"
              },
              {
                "$ref": "#/definitions/CommonTag"
              },
              {
                "type": "string"
              }
            ]
          }
        },
        "layers": {
          "type": "number"
        },
        "animations": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "position": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "rotation": {
          "$ref": "#/definitions/IEuler3dConfig"
        },
        "scale": {
          "$ref": "#/definitions/IWithCoordsXYZ"
        },
        "visible": {
          "type": "boolean"
        },
        "castShadow": {
          "type": "boolean"
        },
        "receiveShadow": {
          "type": "boolean"
        },
        "frustumCulled": {
          "type": "boolean"
        },
        "renderOrder": {
          "type": "number"
        },
        "color": {
          "type": "string"
        },
        "strokeColor": {
          "type": ["string", "number"]
        },
        "materialType": {
          "type": "string",
          "enum": ["MeshBasicMaterial", "MeshStandardMaterial"]
        },
        "materialParams": {
          "type": "object"
        },
        "text": {
          "type": "string"
        },
        "fontSize": {
          "type": "number"
        },
        "font": {
          "type": "string"
        },
        "maxWidth": {
          "type": "number"
        },
        "lineHeight": {
          "type": "number"
        },
        "letterSpacing": {
          "type": "number"
        },
        "textAlign": {
          "$ref": "#/definitions/TextAlign"
        },
        "anchorX": {
          "anyOf": [
            {
              "$ref": "#/definitions/TextAnchorX"
            },
            {
              "type": "number"
            }
          ]
        },
        "anchorY": {
          "anyOf": [
            {
              "$ref": "#/definitions/TextAnchorY"
            },
            {
              "type": "number"
            }
          ]
        },
        "clipRect": {
          "type": "array",
          "items": {
            "type": "number"
          },
          "minItems": 4,
          "maxItems": 4
        },
        "depthOffset": {
          "type": "number"
        },
        "direction": {
          "$ref": "#/definitions/TextDirection"
        },
        "overflowWrap": {
          "$ref": "#/definitions/TextOverflowWrap"
        },
        "whiteSpace": {
          "$ref": "#/definitions/TextWhiteSpace"
        },
        "outlineWidth": {
          "type": "number"
        },
        "outlineOffsetX": {
          "type": "number"
        },
        "outlineOffsetY": {
          "type": "number"
        },
        "outlineColor": {
          "type": ["string", "number"]
        },
        "outlineOpacity": {
          "type": "number"
        },
        "strokeWidth": {
          "type": "number"
        },
        "strokeOpacity": {
          "type": "number"
        },
        "curveRadius": {
          "type": "number"
        },
        "fillOpacity": {
          "type": "number"
        },
        "fontStyle": {
          "$ref": "#/definitions/TextFontStyle"
        },
        "fontWeight": {
          "$ref": "#/definitions/TextFontWeight"
        },
        "glyphGeometryDetail": {
          "type": "number"
        },
        "gpuAccelerateSDF": {
          "type": "boolean"
        },
        "outlineBlur": {
          "type": "number"
        },
        "sdfGlyphSize": {
          "type": "number"
        },
        "textIndent": {
          "type": "number"
        },
        "unicodeFontsUrl": {
          "type": "string"
        }
      },
      "required": ["position", "tags", "text"]
    },
    "TextTag": {
      "type": "string",
      "enum": ["ui", "action"]
    },
    "TextAlign": {
      "type": "string",
      "enum": ["left", "right", "center", "justify"]
    },
    "TextAnchorX": {
      "type": "string",
      "enum": ["left", "right", "center"]
    },
    "TextAnchorY": {
      "type": "string",
      "enum": ["top", "bottom", "middle", "baseline"]
    },
    "TextDirection": {
      "type": "string",
      "enum": ["auto", "ltr", "rtl"]
    },
    "TextOverflowWrap": {
      "type": "string",
      "enum": ["normal", "break-word"]
    },
    "TextWhiteSpace": {
      "type": "string",
      "enum": ["normal", "nowrap"]
    },
    "TextFontStyle": {
      "type": "string",
      "enum": ["normal", "italic"]
    },
    "TextFontWeight": {
      "type": "string",
      "enum": ["normal", "bold"]
    },
    "IControlsConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "tags": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/ControlsTag"
              },
              {
                "$ref": "#/definitions/CommonTag"
              },
              {
                "type": "string"
              }
            ]
          }
        },
        "type": {
          "$ref": "#/definitions/IControlsType"
        },
        "cameraTag": {
          "$ref": "#/definitions/CameraTag"
        },
        "enableDamping": {
          "type": "boolean"
        }
      },
      "required": ["cameraTag", "tags", "type"]
    },
    "ControlsTag": {
      "type": "string",
      "const": "initial"
    },
    "IControlsType": {
      "type": "string",
      "const": "OrbitControls"
    }
  }
}
