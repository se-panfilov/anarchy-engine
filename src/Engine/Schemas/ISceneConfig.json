{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "name": {
      "type": "string"
    },
    "actors": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/IActorConfig"
      }
    },
    "cameras": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ICameraConfig"
      }
    },
    "lights": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ILightConfig"
      }
    },
    "controls": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/IControlsConfig"
      }
    },
    "tags": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/SceneTag"
      }
    }
  },
  "required": ["name", "actors", "cameras", "lights", "controls", "tags"],
  "additionalProperties": false,
  "definitions": {
    "IActorConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "$ref": "#/definitions/IActorType"
        },
        "width": {
          "type": "number"
        },
        "height": {
          "type": "number"
        },
        "materialParams": {
          "$ref": "#/definitions/ActorMaterialConfig"
        },
        "position": {
          "$ref": "#/definitions/IVector3dConfig"
        },
        "castShadow": {
          "type": "boolean"
        },
        "radius": {
          "type": "number"
        },
        "widthSegments": {
          "type": "number"
        },
        "heightSegments": {
          "type": "number"
        },
        "rotation": {
          "$ref": "#/definitions/IVector3"
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ActorTag"
          }
        }
      },
      "required": ["castShadow", "height", "materialParams", "position", "tags", "type", "width"]
    },
    "IActorType": {
      "type": "string",
      "enum": ["sphere", "plane"]
    },
    "ActorMaterialConfig": {
      "type": "object",
      "properties": {
        "color": {
          "type": "string"
        }
      },
      "required": ["color"],
      "additionalProperties": false
    },
    "IVector3dConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "x": {
          "type": "number"
        },
        "y": {
          "type": "number"
        },
        "z": {
          "type": "number"
        }
      },
      "required": ["x", "y", "z"]
    },
    "IVector3": {
      "type": "object",
      "properties": {
        "x": {
          "type": "number",
          "default": 0
        },
        "y": {
          "type": "number",
          "default": 0
        },
        "z": {
          "type": "number",
          "default": 0
        },
        "isVector3": {
          "type": "boolean",
          "const": true
        }
      },
      "required": ["x", "y", "z", "isVector3"],
      "additionalProperties": false
    },
    "ActorTag": {
      "type": "string",
      "const": "intersectable"
    },
    "ICameraConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "lookAt": {
          "$ref": "#/definitions/IVector3dConfig"
        },
        "position": {
          "$ref": "#/definitions/IVector3dConfig"
        },
        "fov": {
          "type": "number"
        },
        "near": {
          "type": "number"
        },
        "far": {
          "type": "number"
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/CameraTag"
          }
        }
      },
      "required": ["lookAt", "position", "tags"]
    },
    "CameraTag": {
      "type": "string",
      "const": "initial"
    },
    "ILightConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "$ref": "#/definitions/ILightType"
        },
        "color": {
          "type": "string"
        },
        "intensity": {
          "type": "number"
        },
        "castShadow": {
          "type": "boolean"
        },
        "shadow": {
          "$ref": "#/definitions/LightShadowConfig"
        },
        "position": {
          "$ref": "#/definitions/IVector3dConfig"
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/LightTag"
          }
        }
      },
      "required": ["castShadow", "color", "intensity", "position", "tags", "type"]
    },
    "ILightType": {
      "type": "string",
      "enum": ["ambient", "directional"]
    },
    "LightShadowConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "mapSize": {
          "$ref": "#/definitions/IVector2dConfig"
        },
        "camera": {
          "type": "object",
          "properties": {
            "far": {
              "type": "number"
            }
          },
          "required": ["far"],
          "additionalProperties": false
        },
        "normalBias": {
          "type": "number"
        }
      },
      "required": ["camera", "mapSize", "normalBias"]
    },
    "IVector2dConfig": {
      "type": "object",
      "properties": {
        "x": {
          "type": "number"
        },
        "y": {
          "type": "number"
        }
      },
      "required": ["x", "y"],
      "additionalProperties": false
    },
    "LightTag": {
      "type": "string",
      "const": "ambient"
    },
    "IControlsConfig": {
      "type": "object",
      "properties": {
        "type": {
          "$ref": "#/definitions/ControlsType"
        },
        "cameraTag": {
          "$ref": "#/definitions/CameraTag"
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ControlsTag"
          }
        }
      },
      "required": ["type", "cameraTag", "tags"],
      "additionalProperties": false
    },
    "ControlsType": {
      "type": "string",
      "const": "OrbitControls"
    },
    "ControlsTag": {
      "type": "string",
      "const": "standard"
    },
    "SceneTag": {
      "type": "string",
      "const": "build-in"
    }
  }
}
